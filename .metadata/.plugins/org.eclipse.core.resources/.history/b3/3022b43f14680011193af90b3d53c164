package com.christine.cart.sqlite;


import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

/**
 * Create database for nutrition database and PLU codes
 * 
 * @see Tutorial by Fluxa for creating own SQLite database in Android using pre-existing tables
 * 		http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/
 *
 */

public class NutritionDatabaseHelper extends DatabaseHelper {
	
    private static final String DATABASE_NAME = "nutrition_db";
    private static final int DATABASE_VERSION = 1;
    
	private static final String N_ID = "_id";
	private static final String N_NAME = "Shrt_Desc";
	private static final String N_CALORIES = "Energ_Kcal";
	private static final String N_PROTEIN = "Protein_g";
	private static final String N_TOTALFATS = "Lipid_Tot_g";
	private static final String N_CARBS = "Carbohydrt_g";
	private static final String N_FIBER = "Fiber_TD_g";
	private static final String N_SUGAR = "Sugar_Tot_g";
	private static final String N_CALCIUM = "Calcium_mg";
	private static final String N_IRON = "Iron_mg";
	private static final String N_MAGNESIUM = "Magnesium_mg";
	private static final String N_POTASSIUM = "Potassium_mg";
	private static final String N_SODIUM = "Sodium_mg";
	private static final String N_ZINC = "Zinc_mg";
	private static final String N_VITC = "Vit_C_mg";
	private static final String N_VITB6 = "Vit_B6_mg";
	private static final String N_VITB12 = "Vit_B12_mg";
	private static final String N_VITA = "Vit_A_RAE";
	private static final String N_VITE = "Vit_E_mg";
	private static final String N_VITD = "Vit_D_μg";
	private static final String N_VITK = "Vit_K_μg";
	private static final String N_FATSAT = "FA_Sat_g";
	private static final String N_FATMONO = "FA_Mono_g";
	private static final String N_FATPOLY = "FA_Poly_g";
	private static final String N_CHOLESTEROL = "Cholestrl_mg";
	private static final String N_SERVINGWEIGHT = "GmWt_1";
	private static final String N_SERVING = "GmWt_Desc1";
	
	

    
	public NutritionDatabaseHelper(Context context) {
    	super(context, DATABASE_NAME, DATABASE_VERSION);
	}
	
	
	
	/**
	 * READING 
	 * from Nutrition DB
	 * 
	 */
	// Getting single Account via username
	public Account getAccount(String username){
		SQLiteDatabase db = this.getReadableDatabase();
		Account account = new Account();
		Cursor cursor = db.query(TABLE_ACCOUNTS, new String[] { ACCOUNT_ID, ACCOUNT_NAME, ACCOUNT_PASSWORD}, ACCOUNT_NAME + "=?", 
				new String []{ String.valueOf(username) }, null, null, null);
		if(cursor.moveToFirst()){
			account = new Account(Integer.parseInt(cursor.getString(0)), cursor.getString(1), cursor.getString(2));
		} else {
			account.setId(0);
			account.setName(null);
			account.setPassword(null);
		}
		
		//return account
		cursor.close();
		db.close();
		return account;
	}
	
	// Get All Accounts
	public List<Account> getAllAccounts(){
		List<Account> accountList = new ArrayList<Account>();
		
		//Select all query
		String selectQuery = "SELECT * FROM " + TABLE_ACCOUNTS;
		
		SQLiteDatabase db = this.getReadableDatabase();
		Cursor cursor = db.rawQuery(selectQuery, null);
		
		if(cursor.moveToFirst()){
			do{
				Account account = new Account();
				account.setId(Integer.parseInt(cursor.getString(0)));
				account.setName(cursor.getString(1));
				account.setPassword(cursor.getString(2));
				
				// Adding account to list
				accountList.add(account);
			} while (cursor.moveToNext());
		}
		
		//return account list
		cursor.close();
		db.close();
		return accountList;
	}
}
	
