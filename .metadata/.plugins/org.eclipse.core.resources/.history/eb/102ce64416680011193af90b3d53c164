package com.christine.cart.sqlite;


import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

/**
 * Create database for nutrition database and PLU codes
 * 
 * @see Tutorial by Fluxa for creating own SQLite database in Android using pre-existing tables
 * 		http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/
 *
 */

public class NutritionDatabaseHelper extends DatabaseHelper {
	
    private static final String DATABASE_NAME = "nutrition_db";
    private static final int DATABASE_VERSION = 1;
    
    private static final String TABLE_NUTRITION = "nutrition_data";
		private static final String N_ID = "_id";
		private static final String N_NAME = "Shrt_Desc";
		private static final String N_CALORIES = "Energ_Kcal";
		private static final String N_PROTEIN = "Protein_g";
		private static final String N_TOTALFATS = "Lipid_Tot_g";
		private static final String N_CARBS = "Carbohydrt_g";
		private static final String N_FIBER = "Fiber_TD_g";
		private static final String N_SUGAR = "Sugar_Tot_g";
		private static final String N_CALCIUM = "Calcium_mg";
		private static final String N_IRON = "Iron_mg";
		private static final String N_MAGNESIUM = "Magnesium_mg";
		private static final String N_POTASSIUM = "Potassium_mg";
		private static final String N_SODIUM = "Sodium_mg";
		private static final String N_ZINC = "Zinc_mg";
		private static final String N_VITC = "Vit_C_mg";
		private static final String N_VITB6 = "Vit_B6_mg";
		private static final String N_VITB12 = "Vit_B12_mg";
		private static final String N_VITA = "Vit_A_RAE";
		private static final String N_VITE = "Vit_E_mg";
		private static final String N_VITD = "Vit_D_μg";
		private static final String N_VITK = "Vit_K_μg";
		private static final String N_FATSAT = "FA_Sat_g";
		private static final String N_FATMONO = "FA_Mono_g";
		private static final String N_FATPOLY = "FA_Poly_g";
		private static final String N_CHOLESTEROL = "Cholestrl_mg";
		private static final String N_SERVINGWEIGHT = "GmWt_1";
		private static final String N_SERVING = "GmWt_Desc1";
	
	private static final String TABLE_PLU = "plu_data";
		private static final String P_ID = "_id";
		private static final String P_PLU = "PLU";
		private static final String P_COMMODITY = "Commodity";
		private static final String P_VARIETY = "Variety";
		private static final String P_SIZE = "Size";
		
    
	public NutritionDatabaseHelper(Context context) {
    	super(context, DATABASE_NAME, DATABASE_VERSION);
	}
	
	
	
	/**
	 * READING 
	 * from Nutrition DB
	 * 
	 */
	// Getting single Item via itemName
	public Item getItem(String itemname){
		SQLiteDatabase db = this.getReadableDatabase();
		Item item = new Item();
		Cursor cursor = db.query(TABLE_NUTRITION, null , N_NAME + "=?", 
				new String []{ String.valueOf(itemname) }, null, null, null);
		if(cursor.moveToFirst()){
			item = new Item(Integer.parseInt(cursor.getString(0)), cursor.getString(1), Integer.parseInt(cursor.getString(2)),
					Integer.parseInt(cursor.getString(3)), Integer.parseInt(cursor.getString(4)), Integer.parseInt(cursor.getString(5)),
					Integer.parseInt(cursor.getString(6)), Integer.parseInt(cursor.getString(7)), Integer.parseInt(cursor.getString(8)),
					Integer.parseInt(cursor.getString(9)), Integer.parseInt(cursor.getString(10)), Integer.parseInt(cursor.getString(11)),
					Integer.parseInt(cursor.getString(12)), Integer.parseInt(cursor.getString(13)), Integer.parseInt(cursor.getString(14)),
					Integer.parseInt(cursor.getString(15)), Integer.parseInt(cursor.getString(16)), Integer.parseInt(cursor.getString(17)),
					Integer.parseInt(cursor.getString(18)), Integer.parseInt(cursor.getString(19)), Integer.parseInt(cursor.getString(20)),
					Integer.parseInt(cursor.getString(21)), Integer.parseInt(cursor.getString(22)), Integer.parseInt(cursor.getString(23)),
					Integer.parseInt(cursor.getString(24)), Integer.parseInt(cursor.getString(25)), Integer.parseInt(cursor.getString(28)));
		} else {
			item.setId(0);
			item.setName(null);
			item.setPassword(null);
		}
		
		//return account
		cursor.close();
		db.close();
		return item;
	}
	
	// Get All Accounts
	public List<Account> getAllAccounts(){
		List<Account> accountList = new ArrayList<Account>();
		
		//Select all query
		String selectQuery = "SELECT * FROM " + TABLE_ACCOUNTS;
		
		SQLiteDatabase db = this.getReadableDatabase();
		Cursor cursor = db.rawQuery(selectQuery, null);
		
		if(cursor.moveToFirst()){
			do{
				Account account = new Account();
				account.setId(Integer.parseInt(cursor.getString(0)));
				account.setName(cursor.getString(1));
				account.setPassword(cursor.getString(2));
				
				// Adding account to list
				accountList.add(account);
			} while (cursor.moveToNext());
		}
		
		//return account list
		cursor.close();
		db.close();
		return accountList;
	}
}
	
